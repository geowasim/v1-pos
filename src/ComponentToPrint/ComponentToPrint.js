import React, { useState, useEffect } from "react";

import MyLogo from "./logoForPrint.png";
import "./ComponentToPrint.css";

export const ComponentToPrint = React.forwardRef((props, ref) => {
  const { cartItems, itemsPrice, method, paidMoney, change } = props;

  // console.log(props);

  const [data, setData] = useState(JSON.parse(localStorage.getItem("inv_sn")));

  useEffect(() => {
    const items = JSON.parse(localStorage.getItem("inv_sn"));
    if (items) {
      setData((data) => data, items);
    }
  }, [data]);

  return (
    <div className="fatorah" ref={ref}>
      <div>
        <svg
          version="1.0"
          xmlns="http://www.w3.org/2000/svg"
          width="50.000000pt"
          height="50.000000pt"
          viewBox="0 0 488.000000 213.000000"
          preserveAspectRatio="xMidYMid meet"
        >
          <g
            transform="translate(0.000000,213.000000) scale(0.100000,-0.100000)"
            fill="#000000"
            stroke="none"
          >
            <path
              d="M3005 1382 c-40 -78 -152 -280 -195 -352 -5 -8 -26 -44 -47 -80 -20
-36 -53 -94 -74 -129 -21 -35 -40 -68 -42 -75 -2 -6 -15 0 -31 16 -34 33 -107
68 -144 68 -40 0 -102 -48 -140 -107 -40 -62 -88 -168 -102 -224 -19 -74 -133
-180 -163 -150 -6 6 -5 52 2 125 18 185 -14 277 -97 276 -19 0 -108 -103 -172
-200 -50 -75 -66 -94 -55 -65 53 140 98 276 99 300 1 22 -5 32 -24 42 -41 19
-67 7 -75 -35 -4 -21 -29 -98 -56 -172 -27 -74 -49 -140 -49 -146 0 -13 -52
-60 -124 -113 -72 -52 -76 -46 -76 121 0 79 -4 148 -8 154 -4 6 -16 14 -27 19
-19 8 -19 9 3 12 18 4 21 9 16 31 -12 48 -33 80 -67 101 -68 42 -140 19 -196
-62 -17 -25 -34 -47 -39 -49 -11 -4 -74 -111 -105 -178 -21 -44 -51 -132 -71
-205 -9 -32 55 -95 98 -95 8 0 29 19 47 43 18 23 57 68 85 99 29 32 81 97 116
145 l63 87 6 -113 c6 -110 6 -112 40 -147 52 -54 78 -65 117 -48 18 7 35 20
38 28 3 8 12 17 19 20 11 4 13 -2 8 -25 -5 -26 -1 -35 26 -60 36 -33 71 -38
71 -11 0 29 102 223 162 308 31 43 75 101 99 128 42 47 43 48 52 25 5 -13 6
-87 2 -164 -7 -159 2 -191 64 -232 32 -22 36 -22 60 -7 14 9 38 28 53 42 15
14 29 24 31 21 2 -2 9 -30 16 -61 12 -57 29 -76 79 -92 18 -6 30 -1 55 27 28
29 98 139 164 257 35 61 86 144 109 175 28 37 121 207 187 340 51 104 74 118
36 24 -79 -201 -216 -660 -203 -681 3 -5 1 -14 -4 -21 -13 -17 -34 -131 -34
-194 -1 -62 11 -80 58 -89 39 -7 52 -1 37 18 -17 21 -21 65 -12 115 6 32 6 49
-2 53 -7 5 -8 20 -3 41 4 19 8 55 8 82 1 28 5 47 12 47 7 0 14 17 17 38 5 37
46 153 57 162 7 5 18 35 90 246 61 177 166 437 214 529 48 91 47 96 -4 108
-24 6 -29 0 -75 -91z m-131 -486 c-9 -26 -18 -45 -20 -43 -2 2 3 25 12 51 9
26 18 45 20 43 2 -2 -3 -25 -12 -51z m-34 -103 c-13 -40 -30 -66 -30 -45 0 18
32 93 37 88 3 -3 0 -22 -7 -43z m-1485 -60 c14 -32 14 -38 0 -60 -9 -12 -11
-23 -6 -23 5 0 9 -10 8 -22 -1 -28 -139 -216 -204 -281 -43 -42 -49 -45 -49
-25 0 13 2 25 5 28 3 3 17 18 31 35 29 34 7 20 -50 -32 -19 -18 -36 -28 -38
-23 -6 16 64 167 115 253 48 79 141 187 162 187 6 0 18 -16 26 -37z m1229 -3
c32 -48 42 -25 -113 -257 -128 -193 -164 -235 -175 -208 -8 21 19 151 48 231
45 124 155 274 200 274 7 0 25 -18 40 -40z m188 8 c-7 -7 -12 -8 -12 -2 0 14
12 26 19 19 2 -3 -1 -11 -7 -17z m-850 -75 c-28 -32 -82 -105 -121 -162 -39
-58 -71 -102 -71 -98 0 13 92 163 128 207 49 62 105 121 110 115 2 -2 -18 -30
-46 -62z m-782 2 c0 -3 -9 -18 -19 -33 -11 -15 -31 -47 -46 -70 -27 -45 -47
-53 -24 -10 38 73 89 137 89 113z m545 -172 c-51 -152 -75 -207 -75 -176 0 16
55 191 80 253 12 30 26 66 31 79 5 13 12 21 15 18 4 -3 -19 -82 -51 -174z
m1046 114 c-13 -13 -15 1 -4 30 7 17 8 17 11 -1 2 -10 -1 -23 -7 -29z m-1646
-84 c-29 -60 -58 -125 -65 -145 -6 -21 -16 -38 -21 -38 -5 0 -4 12 2 26 12 34
3 45 -11 13 -9 -21 -9 -19 -4 11 7 37 40 120 48 120 3 0 -1 -21 -9 -47 -8 -27
-15 -50 -15 -53 0 -3 18 32 40 78 35 75 76 142 85 142 2 0 -20 -48 -50 -107z
m675 53 c0 -3 -4 -8 -10 -11 -5 -3 -10 -1 -10 4 0 6 5 11 10 11 6 0 10 -2 10
-4z m943 -81 c-7 -21 -13 -19 -13 6 0 11 4 18 10 14 5 -3 7 -12 3 -20z m-1316
-82 c-2 -16 -4 -5 -4 22 0 28 2 40 4 28 2 -13 2 -35 0 -50z m220 -35 c-11 -25
-24 -37 -51 -45 -20 -6 -36 -8 -36 -3 0 13 95 101 98 91 2 -5 -3 -24 -11 -43z
m1083 -72 c0 -3 -4 -8 -10 -11 -5 -3 -10 -1 -10 4 0 6 5 11 10 11 6 0 10 -2
10 -4z"
            />
            <path
              d="M1304 603 c-15 -20 -23 -33 -16 -29 13 8 56 66 49 66 -3 0 -17 -17
-33 -37z"
            />
            <path d="M1259 543 c-13 -16 -12 -17 4 -4 9 7 17 15 17 17 0 8 -8 3 -21 -13z" />
            <path d="M1164 388 l-29 -33 33 29 c17 17 32 31 32 33 0 8 -8 1 -36 -29z" />
            <path
              d="M600 1341 c-127 -41 -252 -121 -362 -231 -141 -143 -228 -283 -228
-369 0 -76 70 -165 170 -216 19 -10 36 -18 37 -20 2 -1 -8 -28 -22 -61 -13
-32 -24 -53 -25 -46 0 7 -4 11 -9 8 -13 -9 -22 -147 -12 -199 7 -37 19 -60 52
-94 104 -107 175 -126 283 -75 l59 28 70 -24 c123 -41 231 -30 314 34 30 22
63 79 63 107 0 20 -70 -2 -94 -30 -22 -25 -31 -28 -83 -28 -53 1 -153 21 -153
32 0 3 22 30 48 61 65 76 80 99 147 227 122 234 176 476 141 628 -21 88 -32
109 -104 187 -89 98 -171 120 -292 81z m215 -77 c72 -34 123 -170 110 -292
-15 -151 -124 -419 -242 -601 -52 -79 -123 -161 -140 -161 -18 0 -66 40 -89
73 -26 39 -30 67 -12 85 21 21 2 23 -25 2 -57 -45 -65 -165 -13 -219 14 -15
26 -30 26 -33 0 -11 -81 -38 -114 -38 -44 0 -91 38 -106 86 -16 49 -8 213 14
286 16 53 20 58 46 58 113 0 301 78 397 163 20 18 21 22 8 48 -8 15 -28 34
-45 43 -30 15 -32 14 -97 -30 -37 -24 -71 -44 -75 -44 -5 0 -7 -4 -4 -9 3 -5
0 -11 -7 -14 -126 -51 -136 -52 -99 -11 10 10 30 36 46 56 19 26 39 39 62 44
41 8 44 26 7 45 -16 7 -31 15 -34 17 -9 4 -69 -48 -69 -60 0 -6 8 -4 18 5 38
35 30 15 -19 -48 -31 -40 -48 -69 -43 -77 4 -7 4 -10 -1 -6 -4 4 -14 0 -20 -9
-17 -23 -134 -22 -169 0 -43 29 -37 129 15 214 114 190 329 379 487 427 63 20
147 20 187 0z m-395 -994 c0 -5 22 -26 50 -47 29 -21 46 -41 41 -46 -12 -12
-43 6 -80 48 -32 36 -39 55 -21 55 6 0 10 -4 10 -10z m66 -117 c-7 -7 -76 47
-76 59 0 5 18 -5 40 -22 23 -18 39 -35 36 -37z m194 -44 c0 -4 -13 -3 -30 2
-16 6 -28 15 -25 20 6 9 55 -10 55 -22z"
            />
            <path
              d="M325 720 c-10 -11 -13 -20 -7 -20 6 0 16 9 22 20 6 11 9 20 7 20 -2
0 -12 -9 -22 -20z"
            />
            <path
              d="M3658 1333 c-54 -63 -206 -482 -248 -686 -20 -97 -6 -74 19 31 27
111 92 319 122 388 36 80 32 39 -6 -61 -33 -89 -84 -264 -114 -392 -9 -38 -17
-50 -27 -46 -8 3 -14 -1 -15 -8 -1 -8 -2 -28 -4 -46 -1 -17 -15 -48 -30 -70
-15 -21 -18 -28 -7 -15 11 12 23 22 26 22 8 0 -5 -33 -22 -52 -17 -21 -37 -24
-26 -6 4 7 -5 2 -19 -11 -30 -28 -35 -18 -10 19 14 22 11 21 -18 -6 -99 -90
-163 -124 -229 -124 -41 0 -49 3 -54 23 -11 43 -6 56 42 85 70 43 199 211 228
297 14 39 14 47 0 73 -16 32 -104 92 -134 92 -20 0 -64 -27 -109 -67 -99 -89
-160 -301 -123 -433 19 -68 126 -146 194 -141 54 3 148 62 224 141 39 41 72
69 72 62 0 -6 -4 -12 -10 -12 -6 0 -10 -28 -10 -63 0 -86 22 -124 91 -158 52
-26 55 -26 83 -11 35 21 104 124 168 252 26 52 50 102 53 110 13 33 44 84 45
73 0 -7 -7 -58 -16 -114 -20 -126 -16 -219 12 -256 25 -33 90 -73 120 -73 54
0 121 99 263 391 85 175 110 250 38 114 -38 -71 -110 -200 -163 -292 -11 -18
-23 -33 -27 -33 -4 0 8 29 28 65 52 93 36 80 -21 -16 -26 -44 -69 -104 -95
-132 -48 -51 -49 -52 -65 -32 -18 23 -14 117 12 267 43 253 163 619 249 760
19 31 32 63 29 71 -7 19 -56 40 -81 35 -43 -8 -179 -338 -244 -593 -15 -57
-44 -122 -102 -225 -88 -158 -117 -204 -124 -197 -2 3 6 22 20 44 31 49 49 83
44 83 -2 0 -27 -37 -55 -82 -28 -46 -71 -105 -97 -133 -44 -48 -46 -49 -60
-31 -66 87 108 774 260 1029 l37 61 -27 23 c-31 27 -66 30 -87 6z m298 -329
c-18 -49 -45 -133 -61 -186 -15 -54 -31 -95 -35 -93 -13 8 75 290 111 357 23
44 16 7 -15 -78z m-371 36 c-4 -12 -9 -19 -12 -17 -3 3 -2 15 2 27 4 12 9 19
12 17 3 -3 2 -15 -2 -27z m410 0 c-4 -12 -9 -19 -12 -17 -3 3 -2 15 2 27 4 12
9 19 12 17 3 -3 2 -15 -2 -27z m-450 -106 c-8 -20 -18 -35 -21 -32 -2 3 3 25
12 49 10 23 19 38 21 32 2 -6 -3 -28 -12 -49z m415 5 c-18 -42 -25 -28 -9 18
7 21 14 32 17 25 2 -7 -2 -26 -8 -43z m-480 -241 c-24 -101 -46 -175 -48 -164
-4 20 3 55 50 229 49 184 48 137 -2 -65z m455 165 c-10 -27 -83 -332 -91 -380
-4 -24 -10 -43 -15 -43 -9 0 -6 26 22 150 36 160 72 290 82 290 5 0 6 -8 2
-17z m-732 -97 c8 -19 -17 -111 -39 -144 -10 -15 -41 -59 -69 -97 -104 -141
-128 -152 -101 -46 26 101 75 191 135 248 59 57 66 60 74 39z m647 -128 c-17
-74 -33 -96 -26 -37 5 47 25 103 34 95 2 -3 -1 -29 -8 -58z m-436 -103 c-4 -8
-10 -15 -15 -15 -4 0 -6 7 -3 15 4 8 10 15 15 15 4 0 6 -7 3 -15z m412 -7 c-3
-13 -8 -40 -11 -62 -3 -21 -9 -36 -11 -33 -9 9 8 117 17 117 5 0 7 -10 5 -22z
m-423 -48 c-3 -11 -9 -20 -15 -20 -5 0 -4 9 2 20 6 11 12 20 14 20 2 0 2 -9
-1 -20z m19 -32 c-7 -7 -12 -8 -12 -2 0 14 12 26 19 19 2 -3 -1 -11 -7 -17z"
            />
            <path
              d="M4391 772 c-25 -26 -60 -64 -76 -83 -43 -49 -131 -229 -157 -321 -25
-89 -19 -114 38 -144 29 -16 36 -16 58 -4 14 7 28 21 31 29 3 9 39 55 81 101
41 47 99 117 127 157 29 40 55 72 60 73 4 0 7 -49 7 -110 0 -107 1 -110 30
-143 35 -41 81 -62 112 -53 13 4 46 27 73 52 l50 45 -50 -25 c-27 -13 -51 -23
-53 -21 -8 8 19 43 66 88 70 65 78 83 10 22 -71 -64 -128 -105 -145 -105 -15
0 -16 10 -13 147 2 131 -4 161 -38 175 -27 11 -27 12 -4 16 20 3 22 8 17 35
-15 69 -71 117 -139 117 -33 0 -45 -7 -85 -48z m159 -41 c12 -36 11 -42 -11
-73 -18 -26 -19 -30 -4 -18 17 14 18 13 12 -2 -3 -9 -2 -18 3 -20 16 -5 -204
-289 -239 -308 -28 -14 -23 20 7 53 38 40 12 33 -28 -8 -66 -68 -63 -44 10
111 72 153 183 304 223 304 8 0 20 -18 27 -39z m-254 -126 c-19 -31 -37 -62
-39 -69 -2 -6 -8 -8 -12 -4 -7 7 35 88 63 121 28 32 23 10 -12 -48z m-14 -76
c-28 -52 -55 -112 -62 -134 -15 -49 -35 -73 -24 -30 4 17 11 38 16 48 5 10 7
21 4 24 -3 3 -10 -7 -16 -22 -18 -46 -21 -22 -4 28 18 53 38 74 29 30 -4 -17
6 -6 26 32 35 68 72 125 77 121 2 -2 -19 -46 -46 -97z m303 -102 c4 -23 2 -37
-4 -37 -6 0 -11 19 -11 42 0 49 7 47 15 -5z m-395 -51 c0 -3 -4 -8 -10 -11 -5
-3 -10 -1 -10 4 0 6 5 11 10 11 6 0 10 -2 10 -4z"
            />
            <path d="M4319 343 l-24 -28 28 24 c15 14 27 26 27 28 0 8 -8 1 -31 -24z" />
          </g>
        </svg>
      </div>
      <h3> كانديـــلا </h3>
      <br />
      <div className="perData">
        <p>معرض صناع العطور الثاني - الطائف</p>
        <p>Simplified Vat Invoice</p>
        <p>فاتورة ضريبية مبسطة</p>

        <p>Vat: 310430668500003 :الرقم الضريبي</p>

        <p>C.R: 1010208753 :س .ت</p>
      </div>
      <div className="g1">
        <div className="preDataNP">
          <p>Customer: Expo Customer</p>
          <p>Phone: </p>
        </div>
        <div className="preDataNP preDataNP_1">
          <p>Flat: </p>
          <p>Building:</p>
        </div>
      </div>
      <div className="preDataNP preDataNP_2">
        <p>Street: </p>
        <p>Block: </p>
      </div>
      <p>********************************</p>
      <div className="casher">
        <p style={{ display: "none" }}>Cachier: </p>
        <p>Salesperson: EXPO </p>
        <div className="date">
          <p>{new Date().toLocaleString()}</p>
          <span>order# {data[data.length - 1].sn + 1}</span>
          {/* String(Number(year) - 1000) */}
        </div>
      </div>
      <div ref={ref} className="p-5">
        <table className="table">
          <thead>
            <tr>
              <td>Category</td>
              <td>Description</td>
              <td>Vol-مل</td>
              <td>Qty</td>
              <td>Price</td>
              <td>Total</td>
            </tr>
          </thead>
          <tbody>
            {cartItems.length !== 0
              ? cartItems.map((cartProduct, key) => (
                  <tr key={key}>
                    <td>{cartProduct.category} </td>
                    <td>
                      <span>{cartProduct.description}</span>{" "}
                      <span>{cartProduct.title}</span>{" "}
                    </td>
                    <td>{cartProduct.vol} </td>
                    <td>{cartProduct.qty}</td>
                    <td>{cartProduct.price}</td>
                    <td>{cartProduct.qty * cartProduct.price}</td>
                  </tr>
                ))
              : ""}
          </tbody>
        </table>
        <p>********************************</p>
        <p style={{ marginTop: "15px" }}>
          VAT 15% {Math.ceil(itemsPrice * 15) / 100} SAR
        </p>
        <h4 className="px-2">Total without VAT {Math.ceil(itemsPrice)} SAR</h4>
        <h4 className="px-2">
          Total Amount include VAT: {(itemsPrice * 15) / 100 + itemsPrice} SAR
        </h4>

        <p>
          {method === "Mada"
            ? "payment by : Mada(مدى)"
            : "payment by : Cash(كاش)"}
        </p>
        {method === "Mada" ? (
          <div className="paid">
            <p>
              <span>SAR {(itemsPrice * 15) / 100 + itemsPrice} </span> : المبلغ
              المستلم
            </p>
          </div>
        ) : (
          <>
            <p>
              <span>SAR {paidMoney} </span> : المبلغ المستلم
            </p>
            <p style={{ marginBottom: "10px" }}>
              <span>SAR {change} </span> : المتبقي للعميل
            </p>
          </>
        )}
      </div>

      <p>********************************</p>
      <p style={{ marginTop: "10px" }}> نشكركم لاختياركم منتجاتنا </p>
      <p> Thank you for choosing our products</p>
      <p>See you soon!</p>
    </div>
  );
});

// const [allData, setAllData] = useState(
//   JSON.parse(localStorage.getItem("step_d")) || [
//     {
//       dateTime: `${
//         new Date().toLocaleTimeString() +
//         " - " +
//         new Date().toLocaleDateString()
//       }`,
//       sn: 20,
//       items: [],
//       totalWithoutVat: 0,
//       vat: 0,
//       total: 0,
//       qty: 0,
//       paymentMehod: "",
//       paid: 0,
//       change: 0,
//     },
//   ]
// );
